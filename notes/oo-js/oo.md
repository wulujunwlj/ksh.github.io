
JavaScript 面向对象编程指南
==========

## 第1章：引言
### 1.5 面向对象的程序设计
* 对象、方法、属性
    - 对象(名词)：事物(人和物)在程序设计语言中的表现形式
    - 方法(动词)：对象动作
    - 属性(形容词)：对象特征
* 类
    - 类：对象的模板
    - 对象：类的实例
    - JS 中没有类，一切都是基于对象的，依赖于一套原型系统(prototype)。原型也是一种对象
    - 关于原型和对象的描述：将现有的对象(原型)扩展成了一个新对象(实例)
* 封装
    - 主要用于阐述对象中所包含的内容。主要由两部分组成
        + 相关的数据(属性)
        + 基于这些数据所能做的事(方法)
    - 使用对象时只关注所操作对象的接口，而不必去关心具体实现
    - 通过函数作用域隐藏数据，保护程序的隐秘性
* 聚合
    - 聚合，有时候也叫组合。是指将几个现有对象合并成一个新对象的过程
* 重用与继承
    - 重用
    - 继承
        + 通过继承，可以实现对现有代码的重用
        + 传统的 OOP 环境中，继承通常指类与类之间的关系
        + JS 的继承只发生在对象之间
        + 重定义继承方法的过程叫做覆写
* 多态
    - 不同对象通过相同的方法调用来实现各自行为的能力，称之为多态

## 第2章：基本数据类型，数组，循环及条件表达式
### 2.4 基本数据类型综述
* JS 中有五大基本数据类型
    - 数字
    - 字符串
    - 布尔值
    - undefined
    - null
* 任何不属于基本类型的东西都属于对象
* 数字类型可以存储的数据包括：正负整数、浮点数、十六进制数、八进制数、指数、特殊数值：NaN、Infinity、-Infinity
* 字符串类型存储的是一对引号之间的所有字符
* 布尔类型的值只有两个：true、false
* null类型的值只有一个：null
* undefined 类型的值只有一个：undefined
* 在转换为布尔类型时，6种值会被转换为false
    - ''
    - null
    - undefined
    - 0
    - NaN
    - false

### 数组
* typeof array === 'object'

## 第3章：函数
### 3.1 什么是函数
* 函数本质上是一种代码的分组形式通过这种形式赋予某组代码一个名字，以便于日后重用时调用
* 函数的组成
    - function 子句
    - 函数名称
    - 函数形参
    - 函数体
    - return 子句(默认返回 undefined。一个函数只能有一个返回值)

### 3.3 变量的作用域
* JS 中不能为变量定义特定的块作用域，但可以定义其所属的函数作用域
* 全局变量指的是声明在所有函数之外的变量；局部变量是指在某个函数中定义的变量

### 3.4 函数也是数据
* 对于 JS 来说，函数也是一种数据类型
* 匿名函数：没有被赋值给变量和赋予名字的函数
* 回调函数：将函数A传递给函数B，并由B来执行A时，A就成了一个回调函数(callback functions)。如果A还是一个无名函数，就称为匿名回调函数
* 回调函数的优势
    - 可以不做命名的情况下传递函数(节省全局变量)
    - 可以将一个函数调用操作委托给另一个函数(节省代码编写工作)
    - 有助于提升性能
* 自调函数：在定以后自行调用
    - 优点：不会产生任何全局变量
    - 缺点：无法重复执行
    - 适用场合：执行一次性任务或初始化任务
* 内部(私有)函数
    - 可以确保全局命名空间的纯净性
    - 私有性
* 返回函数的函数
* 能重写自己的函数
    - 可以用来执行某些一次性的初始化工作

### 3.5 闭包
* 作用域链
* 词法作用域
    - JS 中，每个函数都有一个自己的词法作用域。也就是说，每个函数在**被定义时**(而非执行时)都会创建一个属于自己的环境(作用域)
* 利用闭包突破作用域链
```
// 闭包实现方式1：返回一个函数
function f() {
    var b = 'b';

    return function() {
        return b;
    }
}
// 闭包实现方式2：函数体内创建一个新的全局函数
var n;

function f() {
    var b = 'b';

    n = function() {
        return b;
    }
}
// 函数所返回的是作用域本身，而不是该作用域中的变量或变量当前所返回的值
function f(arg) {
    var n = function() {
        return arg;
    }

    arg++;
    return n;
}
// 循环中的闭包：错误的方式
function f() {
    var a = [];
    var i;

    for (i = 0; i < 3; i++) {
        a[i] = function() {
            return i;
        }
    }

    return a;
}
// 循环中的闭包的实现方式：正确方式1
function f() {
    var a = [];
    var i;

    for (i = 0; i < 3; i++) {
        a[i] = (function(x) {
            return function() {
                return x;
            }
        })(i);
    }
}
// 非闭包实现方式
function f() {
    function makeClosure(x) {
        return function() {
            return x;
        }
    }

    var a = [];
    var i;
    for (i = 0; i < 3; i++) {
        a[i] = makeClosure(i);
    }

    return a;
}
```
    - 闭包实现方式1：返回一个函数
    - 闭包实现方式2：函数体内创建一个新的全局函数
    - 如果一个函数需要在其父级函数返回之后留住对父级作用域的链接的 话，就必须要为此建立一个闭包
    - 函数所返回的是作用域本身，而不是该作用域中的变量或变量当前所返回的值
    - 循环中的闭包:循环中的每个闭包都指向了一个共同的局部变量i的引用，因此只能返回i的当前值(循环结束时，当前值为3)。
* Getter 与 Setter
    - 保护变量，利用 getter 获取变量的值，利用 setter 设置变量的值，从而确保局部变量的不可直接访问性
* 迭代器
```
function setup(x) {
    var i = 0;

    return function() {
        return x[i++];
    }
}
```

## 第4章：对象
### 4.1 从数组到对象
* 数组文本标识法(array literal notation)：用[]定义数组的方法
* 对象文本标识法(object literal notation)：用{}定义对象的方法
* 数组包含的是元素，对象包含的是属性
* 哈希表、关联型数组
    - 一般性数组：也叫索引型数组或者枚举型数组(通常以数字为键值)
    - 关联型数组：也叫哈希表(通常以字符串为键值)
* 构造函数
    - 使用 new 调用构造函数时，this 指向新创建的对象，并且会返回新创建的对象
    - 不使用 new 调用构造函数时，函数会返回 undefined，如果函数内部使用 this，相应的 this 会指向全局变量，增加的属性会挂在全局变量
    - 使用构造器创建对象时，会赋予对象一个构造器属性(constructor property)。该属性实际是一个指向用于创建该对象的构造器函数的引用
    - 如果对象是通过对象文本标识法创建的，实际上它是由内建构造器 Object() 函数所创建的
    - 如果构造函数返回一个对象，将不会再返回 this

### 4.2 内建对象
* 数据封装类对象：Object,Array,Boolean,Number,String
    - Object
        + 空对象包含的方法和属性：
            * 返回构造器函数的构造器属性
            * 返回对象描述字符串的 toString() 方法
            * 返回对象单值描述信息的 valueOf() 方法。一般情况下，返回的就是对象本身
    - Array
        + 为数组的非数字属性赋值会被忽略
        + 设置 length 属性大于当前元素个数时，多余部分会被自动创建为空对象；当设置属性小于当前元素个数时，多余部分会被移除
        + 数组方法
            * push/pop
            * sort
            * join
            * slice/splice
    - Function
        + 3种创建函数的方式？
        + 尽量避免使用 Function() 构造器，因为它与 eval 和 setTimeout() 一样，始终会以字符串的形式通过 JS 的代码检查
        + Function 对象的属性
            * 函数对象中含有一个构造器属性，其引用就是 Function() 构造器函数
            * Function 对象中有一个 length 属性，用于记录该函数所拥有的参数数量
            * caller 属性(ECMA 标准之外)
        + P114
    - 
* 工具类对象：Math、Date、RegExp 等用于提供遍历的对象
* 错误类对象：包括一般性错误对象以及其他各种特殊的错误类对象
## 第5章：原型
## 第6章：继承
## 第7章：浏览器环境
## 第8章：编程模式与设计模式
